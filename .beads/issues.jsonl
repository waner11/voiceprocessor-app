{"id":"voiceprocessor-api-0eq","title":"Setup database context and migrations","description":"Setup VoiceProcessorDbContext with EF Core and PostgreSQL. Configure entity relationships, indexes, and create initial migration.","notes":"Completed: DbContext in Accessors/Data/DbContext/. Tables: users, voices, generations, generation_chunks, feedbacks. Migration applied to local PostgreSQL (podman container).","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-18T12:22:00.956204863-05:00","created_by":"wanerpena","updated_at":"2026-01-18T14:25:54.113077204-05:00","closed_at":"2026-01-18T12:25:56.485321982-05:00","close_reason":"DbContext, migrations, and DI registration complete"}
{"id":"voiceprocessor-api-0j2","title":"Implement TTS audio generation and chunk processing","description":"Implement the actual TTS generation workflow. Includes: background job that processes generation, calls TTS provider accessor for each chunk, handles retries/failures, updates generation status and progress. Depends on Hangfire setup.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-19T17:15:24.977265713-05:00","created_by":"wanerpena","updated_at":"2026-01-19T21:02:22.782348857-05:00","closed_at":"2026-01-19T21:02:22.782348857-05:00","close_reason":"Implemented TTS generation with chunk processing, retry logic, progress tracking, and error handling","dependencies":[{"issue_id":"voiceprocessor-api-0j2","depends_on_id":"voiceprocessor-api-upe","type":"blocks","created_at":"2026-01-19T17:15:59.184680677-05:00","created_by":"wanerpena"}]}
{"id":"voiceprocessor-api-141","title":"Integrate payment history in billing settings","description":"## Frontend: Payment History Integration\n\nConnect the payment history table in billing settings to the backend API.\n\n### Backend Endpoint (Ready)\n`GET /api/v1/payments/history` - Returns user's payment history\n\n### API Response Example\n```json\n{\n  \"payments\": [\n    {\n      \"id\": \"uuid\",\n      \"packName\": \"Starter Pack\",\n      \"creditsAdded\": 10000,\n      \"amountPaid\": 9.99,\n      \"currency\": \"usd\",\n      \"status\": \"completed\",\n      \"createdAt\": \"2026-01-24T12:00:00Z\"\n    }\n  ]\n}\n```\n\n### Implementation\n1. Call API on billing page load\n2. Populate existing payment history table\n3. Format dates and currency properly\n4. Handle empty state (no payments yet)\n\n### Acceptance Criteria\n- [ ] Payment history fetched from API\n- [ ] Table displays date, pack, amount, status\n- [ ] Empty state shown for new users\n- [ ] Loading skeleton during fetch","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-24T19:55:46.559197585-05:00","created_by":"wanerpena","updated_at":"2026-01-24T20:01:29.749179005-05:00","closed_at":"2026-01-24T20:01:29.749179005-05:00","close_reason":"Moved to voiceprocessor-web repository"}
{"id":"voiceprocessor-api-1mm","title":"Implement FeedbackAccessor for generation ratings","description":"Create FeedbackAccessor to persist user feedback. Includes: IFeedbackAccessor interface, FeedbackAccessor implementation, wire up in GenerationManager.SubmitFeedbackAsync (line 242 has TODO). Feedback entity already exists.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T17:15:39.982275032-05:00","created_by":"wanerpena","updated_at":"2026-01-19T17:15:39.982275032-05:00"}
{"id":"voiceprocessor-api-1sc","title":"Auto-refresh credits after successful payment","description":"## Frontend: Auto-refresh Credits After Payment\n\nEnsure user credits are updated immediately after successful Stripe payment.\n\n### Problem\nAfter Stripe checkout, user redirects to success page but may see stale credit balance until page refresh.\n\n### Solution\n1. On success page mount, fetch updated user profile\n2. Update global credits state\n3. Show toast notification confirming credits added\n\n### Implementation\n1. Call `GET /api/v1/auth/me` or user endpoint to get fresh credits\n2. Update user context/store with new `creditsRemaining`\n3. Display toast: 'Added 10,000 credits to your account'\n4. Dashboard should reflect new balance without refresh\n\n### Technical Notes\n- Webhook processing adds credits before user redirects\n- Success page should always show updated credits\n- Consider using React Query invalidation or similar\n\n### Acceptance Criteria\n- [ ] Credits refresh on success page\n- [ ] Dashboard shows updated balance\n- [ ] Toast notification confirms purchase\n- [ ] No manual refresh needed","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-24T19:55:46.896920981-05:00","created_by":"wanerpena","updated_at":"2026-01-24T20:01:29.754752405-05:00","closed_at":"2026-01-24T20:01:29.754752405-05:00","close_reason":"Moved to voiceprocessor-web repository","dependencies":[{"issue_id":"voiceprocessor-api-1sc","depends_on_id":"voiceprocessor-api-ytz","type":"blocks","created_at":"2026-01-24T19:56:36.053038886-05:00","created_by":"wanerpena"}]}
{"id":"voiceprocessor-api-2fo","title":"Implement Domain entities","description":"Create domain entities: User, Voice, Generation, GenerationChunk, Feedback. Create enums: GenerationStatus, ChunkStatus, Provider, RoutingPreference, SubscriptionTier.","notes":"Completed: All entities in Domain/Entities/, enums in Domain/Enums/. Entities have navigation properties for EF Core relationships.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-18T12:16:37.862114578-05:00","created_by":"wanerpena","updated_at":"2026-01-18T14:25:51.681062008-05:00","closed_at":"2026-01-18T12:19:47.840177009-05:00","close_reason":"Created all domain entities and enums"}
{"id":"voiceprocessor-api-2r4","title":"Create Manager interfaces","description":"Define Manager layer interfaces following iDesign: IGenerationManager, IVoiceManager, IUserManager. Managers orchestrate between Controllers and Engines/Accessors.","notes":"Completed: Interfaces in Managers/Contracts/. NOT YET IMPLEMENTED - need implementations and DI registration.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-18T13:37:47.835307796-05:00","created_by":"wanerpena","updated_at":"2026-01-18T14:26:12.825067618-05:00","closed_at":"2026-01-18T13:39:19.316139582-05:00","close_reason":"Manager interfaces created: IGenerationManager, IVoiceManager, IUserManager"}
{"id":"voiceprocessor-api-2yp","title":"Implement chapter detection using pattern matching","description":"Detect chapter boundaries in text using regex patterns.\n\n**Approach:** Pattern matching (MVP decision - fast, handles 80% of books)\n\n**Patterns to Detect:**\n- Chapter 1, Chapter 23, CHAPTER I, Ch. 1\n- Part 1, Part I, PART ONE\n- Prologue, Epilogue, Introduction, Foreword, Afterword\n- Section 1, Book 1\n- Bare numbers: '1.', 'XIV'\n- Dividers: ***, ---, ===\n\n**Implementation:**\n1. Create ChapterDetectionEngine in Engines layer\n2. Add IChapterDetectionEngine interface\n3. Implement regex-based detection\n4. Return list of chapters with titles and character offsets\n\n**Output Schema:**\n```csharp\npublic record DetectedChapter\n{\n    public int ChapterNumber { get; init; }\n    public string Title { get; init; }\n    public int CharacterOffset { get; init; }\n    public int EstimatedWordCount { get; init; }\n}\n```\n\n**References:**\n- TECHNICAL_DESIGN.md section on chunking strategies\n- Librarian research bg_eda576d0 for regex patterns\n\n**Future Enhancement (not MVP):**\n- AI-powered detection for books without explicit markers\n- PDF/DOCX heading extraction","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-24T19:49:35.03265073-05:00","created_by":"wanerpena","updated_at":"2026-01-24T19:49:35.03265073-05:00"}
{"id":"voiceprocessor-api-33n","title":"Implement Accessor classes","description":"Implement Accessor classes: database accessors (EF Core), TTS provider accessors (ElevenLabs, OpenAI with IHttpClientFactory + Polly), LocalStorageAccessor, TtsProviderFactory.","notes":"Completed: All accessors implemented and registered via AddAccessors() extension in Program.cs. Includes retry policies, circuit breaker, shared AccessorJsonOptions.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-18T13:54:21.098724325-05:00","created_by":"wanerpena","updated_at":"2026-01-18T14:26:29.934062295-05:00","closed_at":"2026-01-18T13:57:46.506963997-05:00","close_reason":"Accessor implementations: database (User, Voice, Generation, Chunk), TTS providers (ElevenLabs, OpenAI), storage"}
{"id":"voiceprocessor-api-38d","title":"Implement Engine classes","description":"Implement IRoutingEngine (provider selection based on cost/quality/speed), IChunkingEngine (text splitting preserving boundaries), IPricingEngine (cost calculation). Engines contain stateless business logic, called by Managers.","notes":"Completed: All engines implemented following iDesign (no Accessor dependencies). ChunkingEngine splits text preserving word/sentence/paragraph boundaries. PricingEngine calculates costs with configurable provider rates. RoutingEngine scores providers by cost/speed/quality based on preference. All registered via AddEngines() in Program.cs.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-18T14:30:26.741090635-05:00","created_by":"wanerpena","updated_at":"2026-01-18T14:34:18.51029425-05:00","closed_at":"2026-01-18T14:34:08.871786288-05:00","close_reason":"Implemented ChunkingEngine, PricingEngine, RoutingEngine with DI registration"}
{"id":"voiceprocessor-api-3h0","title":"Add Stripe configuration","description":"Add Stripe section to appsettings.json and appsettings.Development.json with SecretKey and WebhookSecret placeholders.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-23T22:57:02.516226318-05:00","created_by":"wanerpena","updated_at":"2026-01-23T23:01:31.433748257-05:00","closed_at":"2026-01-23T23:01:31.433748257-05:00","close_reason":"Added Stripe section to appsettings.json and appsettings.Development.json, created StripeOptions class with SecretKey and WebhookSecret"}
{"id":"voiceprocessor-api-565","title":"Implement StripeAccessor","description":"Create IStripeAccessor interface and StripeAccessor implementation. Methods: GetCreditPacksAsync (fetch from Stripe, cache 1hr), CreateCheckoutSessionAsync, ParseWebhookAsync. Add StripeOptions config class.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-23T22:56:55.822318446-05:00","created_by":"wanerpena","updated_at":"2026-01-23T23:02:50.775533346-05:00","closed_at":"2026-01-23T23:02:50.775533346-05:00","close_reason":"Created IStripeAccessor interface and StripeAccessor implementation with GetCreditPacksAsync (cached), CreateCheckoutSessionAsync, and ParseWebhook methods. Added Stripe.net NuGet package."}
{"id":"voiceprocessor-api-5b9","title":"Implement credits deduction on generation","description":"Deduct user credits after successful generation. Includes: update UserAccessor with DeductCreditsAsync, call after generation completes, handle edge cases (partial completion, cancellation). Credit check already exists in GenerationManager.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-19T17:15:37.835699148-05:00","created_by":"wanerpena","updated_at":"2026-01-23T23:45:04.64819183-05:00","closed_at":"2026-01-23T23:45:04.64819183-05:00","close_reason":"Already implemented - DeductCreditsAsync exists in UserAccessor and is called in GenerationProcessor after successful generation"}
{"id":"voiceprocessor-api-6cc","title":"Implement audio merging for multi-chunk generations","description":"Implement AudioMergeEngine to combine audio chunks into final file. Includes: NAudio integration for audio processing, chunk ordering, format normalization, upload merged file to storage, update generation with final audioUrl.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-19T17:15:29.409473393-05:00","created_by":"wanerpena","updated_at":"2026-01-19T21:05:09.903803425-05:00","closed_at":"2026-01-19T21:05:09.903803425-05:00","close_reason":"Implemented AudioMergeEngine with NAudio for proper MP3 merging","dependencies":[{"issue_id":"voiceprocessor-api-6cc","depends_on_id":"voiceprocessor-api-0j2","type":"blocks","created_at":"2026-01-19T17:15:59.218231831-05:00","created_by":"wanerpena"}]}
{"id":"voiceprocessor-api-7d4","title":"Create Engine interfaces","description":"Define Engine layer interfaces following iDesign: IRoutingEngine (provider selection), IChunkingEngine (text splitting), IPricingEngine (cost calculation). Engines handle algorithmic business logic.","notes":"Completed: Interfaces in Engines/Contracts/ with supporting records (RoutingContext, TextChunk, PriceEstimate, etc.). NOT YET IMPLEMENTED - need implementations and DI registration.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-18T13:42:00.692904767-05:00","created_by":"wanerpena","updated_at":"2026-01-18T14:26:24.863827633-05:00","closed_at":"2026-01-18T13:43:09.759622259-05:00","close_reason":"Engine interfaces created: IRoutingEngine, IChunkingEngine, IPricingEngine"}
{"id":"voiceprocessor-api-7qe","title":"Document upload (PDF/DOCX to text extraction for TTS)","description":"Allow users to upload PDF/DOCX files for automatic text extraction before TTS generation. Enables '1 click audiobook' workflow.\n\n**Target Phase:** Beta (Mar 2026)\n\n**Research Summary:**\n- File formats: PDF (PdfPig), DOCX (OpenXml), TXT\n- Max file size: 50 MB\n- Libraries: UglyToad.PdfPig (Apache 2.0), DocumentFormat.OpenXml (MIT)\n- ASP.NET config: MaxRequestBodySize=50MB, MultipartBodyLengthLimit=50MB\n- Security: Extension allowlist, magic byte validation, safe filenames\n- Effort: 2-3 days\n\n**Business Value:** High - directly enables indie author use case and reduces friction for long-form content.","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-24T18:34:41.100808971-05:00","created_by":"wanerpena","updated_at":"2026-01-24T18:34:48.587949457-05:00","dependencies":[{"issue_id":"voiceprocessor-api-7qe","depends_on_id":"voiceprocessor-api-yqy","type":"discovered-from","created_at":"2026-01-24T18:58:13.716896339-05:00","created_by":"wanerpena"}]}
{"id":"voiceprocessor-api-7x5","title":"Create API Controllers","description":"Create API controllers: ApiControllerBase, GenerationsController, VoicesController. Configure Swagger/OpenAPI with Swashbuckle.","notes":"Completed: Controllers return stub data with TODO comments for manager integration. Swagger UI at root in development. XML docs enabled for API documentation.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-18T12:44:16.009707373-05:00","created_by":"wanerpena","updated_at":"2026-01-18T14:26:09.977686754-05:00","closed_at":"2026-01-18T12:50:07.581880452-05:00","close_reason":"API controllers implemented with Swagger UI"}
{"id":"voiceprocessor-api-7zu","title":"Add voice parameter presets for content types","description":"Replace hardcoded ElevenLabs voice settings with content-based presets.\n\n**Current State:**\n- ElevenLabsAccessor.cs uses hardcoded: stability=0.5, similarity=0.75, style=0, speakerBoost=true\n- OpenAI only passes speed (default 1.0)\n\n**Presets to Implement (research-based):**\n\n| Preset | Stability | Similarity | Speed | Best For |\n|--------|-----------|------------|-------|----------|\n| audiobook (default) | 0.70 | 0.80 | 1.0 | Long-form narration |\n| conversational | 0.50 | 0.75 | 1.05 | Podcasts, casual |\n| dramatic | 0.35 | 0.70 | 0.95 | Fiction, emotional |\n| professional | 0.80 | 0.85 | 1.0 | Technical, educational |\n\n**Source of Values:**\n- ElevenLabs official documentation\n- Librarian research (bg_cf2ddc74) on content-type recommendations\n- NOT validated by manual testing - use as starting point\n\n**Validation Strategy:**\n- Use research values for MVP\n- Add A/B testing later to optimize (separate issue)\n- Track user feedback to correlate preset with satisfaction\n\n**Implementation:**\n1. Add VoicePreset enum to Domain\n2. Add preset field to CreateGenerationRequest\n3. Create preset-to-settings mapping in Engine layer\n4. Update ElevenLabsAccessor to use mapped settings\n5. Update OpenAI to apply speed from preset\n\n**API Changes:**\n- POST /api/v1/generations accepts optional 'preset' field\n- Default preset: 'audiobook'\n\n**Frontend:**\n- Add dropdown to generation form (separate issue in voiceprocessor-web)","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-24T19:22:12.599683684-05:00","created_by":"wanerpena","updated_at":"2026-01-24T19:25:16.225517866-05:00"}
{"id":"voiceprocessor-api-8qr","title":"Add user profile management endpoints","description":"Add endpoints for user self-service. Includes: update profile (name), change password, set password for OAuth-only users, delete account. Extend AuthController or create UserController.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-19T17:15:46.999710489-05:00","created_by":"wanerpena","updated_at":"2026-01-19T17:15:46.999710489-05:00"}
{"id":"voiceprocessor-api-8sb","title":"Security: Implement HttpOnly cookie-based authentication","description":"## Security: HttpOnly Cookie Authentication\n\n### Problem\nCurrent implementation returns JWT access token in the API response body, which the frontend stores in localStorage. This is vulnerable to XSS attacks.\n\n### Current Flow\n```\nPOST /api/v1/auth/login\nResponse: { \"accessToken\": \"jwt...\", \"user\": {...} }\n```\nFrontend stores token in localStorage → XSS can steal it.\n\n### Required Changes\n\n#### 1. Login Endpoint\n```go\n// Instead of returning token in body:\nc.JSON(200, gin.H{\"accessToken\": token})\n\n// Set HttpOnly cookie:\nc.SetCookie(\n    \"session\",           // name\n    token,               // value\n    60*60*24*7,          // maxAge (7 days)\n    \"/\",                 // path\n    \"\",                  // domain (current domain)\n    true,                // secure (HTTPS only)\n    true,                // httpOnly (JS cannot access)\n)\nc.SetSameSite(http.SameSiteLaxMode)\nc.JSON(200, gin.H{\"success\": true, \"user\": user})\n```\n\n#### 2. Auth Middleware\n```go\n// Instead of reading Authorization header:\ntoken := c.GetHeader(\"Authorization\")\n\n// Read from cookie:\ntoken, err := c.Cookie(\"session\")\nif err != nil {\n    c.AbortWithStatusJSON(401, gin.H{\"error\": \"Unauthorized\"})\n    return\n}\n```\n\n#### 3. Logout Endpoint\n```go\n// Clear the cookie\nc.SetCookie(\"session\", \"\", -1, \"/\", \"\", true, true)\nc.JSON(200, gin.H{\"success\": true})\n```\n\n#### 4. CORS Configuration\n```go\n// Ensure credentials are allowed\nconfig := cors.Config{\n    AllowCredentials: true,\n    AllowOrigins:     []string{\"http://localhost:3000\", \"https://yourdomain.com\"},\n    // ... other config\n}\n```\n\n### Endpoints to Update\n- [ ] POST /api/v1/auth/login - Set cookie instead of returning token\n- [ ] POST /api/v1/auth/register - Set cookie instead of returning token  \n- [ ] POST /api/v1/auth/logout - Clear cookie\n- [ ] POST /api/v1/auth/refresh - Refresh cookie\n- [ ] Auth middleware - Read from cookie instead of header\n\n### Acceptance Criteria\n- [ ] JWT stored in HttpOnly cookie (not accessible via JavaScript)\n- [ ] Cookie has Secure flag (HTTPS only in production)\n- [ ] Cookie has SameSite=Lax for CSRF protection\n- [ ] CORS allows credentials from frontend origin\n- [ ] Logout properly clears the cookie\n- [ ] Auth middleware validates cookie-based tokens\n\n### Security Flags Required\n- `HttpOnly: true` - Prevents XSS token theft\n- `Secure: true` - HTTPS only (disable for local dev)\n- `SameSite: Lax` - CSRF protection\n- `Path: /` - Available to all routes\n\n### Frontend Dependency\nFrontend issue: voiceprocessor-web-p9f (blocked by this)\nFrontend will update to use `credentials: include` once this is ready.","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-25T14:18:44.641358462-05:00","created_by":"wanerpena","updated_at":"2026-01-25T20:53:43.981846802-05:00","closed_at":"2026-01-25T20:53:43.981846802-05:00","close_reason":"PR created: https://github.com/waner11/voiceprocessor-api/pull/1 - Implemented HttpOnly cookie authentication for JWT tokens. All 5 auth endpoints updated to set/clear cookies."}
{"id":"voiceprocessor-api-9bv","title":"Integrate Stripe checkout for credit pack purchases","description":"## Frontend: Stripe Checkout Integration\n\nConnect the billing page to backend Stripe endpoints to enable credit pack purchases.\n\n### Backend Endpoints (Ready \u0026 Tested)\n- `GET /api/v1/payments/packs` - Returns available credit packs with prices\n- `POST /api/v1/payments/checkout` - Creates Stripe checkout session, returns `checkoutUrl`\n\n### Implementation Steps\n1. Fetch credit packs from API on billing page load\n2. Display packs with name, credits, and price\n3. On 'Buy' click, call checkout endpoint with `priceId`\n4. Redirect user to returned `checkoutUrl`\n\n### API Response Examples\n```json\n// GET /api/v1/payments/packs\n{\n  \"packs\": [\n    { \"priceId\": \"price_xxx\", \"name\": \"Starter Pack\", \"credits\": 10000, \"priceAmount\": 9.99 },\n    { \"priceId\": \"price_yyy\", \"name\": \"Pro Pack\", \"credits\": 50000, \"priceAmount\": 39.99 }\n  ]\n}\n\n// POST /api/v1/payments/checkout\n{\n  \"checkoutUrl\": \"https://checkout.stripe.com/...\",\n  \"sessionId\": \"cs_test_...\"\n}\n```\n\n### Acceptance Criteria\n- [ ] Credit packs displayed on billing page\n- [ ] Buy button triggers checkout flow\n- [ ] User redirected to Stripe checkout\n- [ ] Loading states during API calls\n- [ ] Error handling for failed requests","status":"closed","priority":0,"issue_type":"feature","created_at":"2026-01-24T19:55:45.883112389-05:00","created_by":"wanerpena","updated_at":"2026-01-24T20:01:29.729971384-05:00","closed_at":"2026-01-24T20:01:29.729971384-05:00","close_reason":"Moved to voiceprocessor-web repository"}
{"id":"voiceprocessor-api-9n7","title":"Integrate Stripe for payments and billing","description":"Implement Stripe integration for subscription billing and usage-based payments. Includes: Stripe SDK setup, subscription tiers (Free/Pro/Enterprise), webhook handling for payment events, customer portal integration, usage metering for TTS credits, invoice generation.","status":"closed","priority":0,"issue_type":"feature","created_at":"2026-01-19T17:11:40.891383368-05:00","created_by":"wanerpena","updated_at":"2026-01-23T23:44:48.252757833-05:00","closed_at":"2026-01-23T23:44:48.252757833-05:00","close_reason":"Completed Stripe integration with credit packs, checkout sessions, webhooks, and payment history"}
{"id":"voiceprocessor-api-ag0","title":"Test Stripe integration with Stripe CLI","description":"End-to-end testing: create Stripe test products with credits metadata, test checkout flow, use stripe listen --forward-to for webhook testing, verify credits added correctly.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-23T22:57:03.158591155-05:00","created_by":"wanerpena","updated_at":"2026-01-25T16:11:22.523889165-05:00","closed_at":"2026-01-25T16:11:22.523889165-05:00","close_reason":"All Stripe integration tests passed: checkout flow, webhook processing, credits addition, idempotency, and error handling verified via Stripe CLI"}
{"id":"voiceprocessor-api-ai5","title":"Integrate PostHog for feature flags and analytics","description":"Add PostHog SDK to both backend (.NET) and frontend (React). Covers: feature flag implementation, user identification across platforms, event tracking for key actions (generation started, completed, etc.), session recordings setup. User already has PostHog account.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T17:11:26.60220834-05:00","created_by":"wanerpena","updated_at":"2026-01-19T17:11:26.60220834-05:00"}
{"id":"voiceprocessor-api-b3y","title":"Seed voice catalog from TTS providers","description":"Populate voices table from ElevenLabs and OpenAI. Includes: fetch voices from provider APIs on startup or via refresh endpoint, map to Voice entity with provider metadata (language, gender, preview URL, cost). Required for testing generation flow.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-19T17:15:34.366156455-05:00","created_by":"wanerpena","updated_at":"2026-01-19T20:21:38.502829229-05:00","closed_at":"2026-01-19T20:21:38.502829229-05:00","close_reason":"Voice seeding was already implemented. Added VoiceSeedingService hosted service for auto-seed on startup when voices table is empty."}
{"id":"voiceprocessor-api-bcw","title":"Implement PaymentHistoryAccessor","description":"Create IPaymentHistoryAccessor interface and implementation. Methods: GetByStripeSessionIdAsync, CreateAsync, GetByUserIdAsync. Use for idempotent webhook handling.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-23T22:56:56.780481047-05:00","created_by":"wanerpena","updated_at":"2026-01-23T23:03:27.505850028-05:00","closed_at":"2026-01-23T23:03:27.505850028-05:00","close_reason":"Created IPaymentHistoryAccessor interface and PaymentHistoryAccessor implementation with GetByStripeSessionIdAsync, CreateAsync, GetByUserIdAsync methods"}
{"id":"voiceprocessor-api-bss","title":"Add SignalR for real-time generation progress","description":"Implement SignalR hub for generation progress updates. Includes: GenerationHub setup, notify clients on status changes (pending→processing→completed), progress percentage updates, error notifications. Improves UX over polling.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T17:15:42.140834891-05:00","created_by":"wanerpena","updated_at":"2026-01-19T17:15:42.140834891-05:00"}
{"id":"voiceprocessor-api-buu","title":"Set up unit and integration tests","description":"Create test projects for key components. Includes: VoiceProcessor.Managers.Tests, VoiceProcessor.Engines.Tests, test coverage for AuthManager, GenerationManager, ChunkingEngine, PricingEngine. Use xUnit + Moq + FluentAssertions.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-19T17:15:49.438017977-05:00","created_by":"wanerpena","updated_at":"2026-01-19T17:15:49.438017977-05:00"}
{"id":"voiceprocessor-api-cs3","title":"Implement Manager classes","description":"Implement IGenerationManager (TTS workflow orchestration), IVoiceManager (voice catalog), IUserManager (credits/activity). Managers coordinate between Controllers and Engines/Accessors following iDesign calling rules.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-18T14:36:12.568511772-05:00","created_by":"wanerpena","updated_at":"2026-01-18T14:40:45.31281369-05:00","closed_at":"2026-01-18T14:40:45.31281369-05:00","close_reason":"Implemented all three Manager classes (UserManager, VoiceManager, GenerationManager) with full business logic orchestration. Fixed namespace conflicts (User entity vs User namespace) and added missing ITtsProviderFactory reference. Created DI extension and wired up AddManagers() in Program.cs. Build verified successful."}
{"id":"voiceprocessor-api-cyy","title":"Add chapter markers to audio output (M4B + MP3 options)","description":"Embed chapter metadata in generated audiobooks and support per-chapter MP3 export.\n\n**Output Options (user choice):**\n1. **M4B with chapters** - Single file with QuickTime chapter atoms (Apple Books, Audible-like)\n2. **MP3 per chapter** - Separate files for each chapter (universal compatibility)\n\n**Technical Implementation:**\n\n**M4B Chapters:**\n- Use FFmpeg or TagLibSharp to embed chapter metadata\n- Format: QuickTime chapter atoms\n- Metadata: title, start time, end time per chapter\n\n**FFmpeg metadata format:**\n```\n;FFMETADATA1\n[CHAPTER]\nTIMEBASE=1/1000\nSTART=0\nEND=300000\ntitle=Chapter 1: Introduction\n```\n\n**MP3 Per Chapter:**\n- Generate separate audio files per chapter\n- Naming convention: `{book-title}-ch01-{chapter-title}.mp3`\n- Option to also create a ZIP archive\n\n**Libraries:**\n- TagLibSharp (NuGet) - for chapter metadata\n- FFMpegCore (NuGet) - FFmpeg wrapper for .NET\n- FFmpeg - for audio concatenation and metadata\n\n**Database:**\nAdd Chapters table to track chapter timing:\n```sql\nCREATE TABLE Chapters (\n    Id UUID PRIMARY KEY,\n    GenerationId UUID REFERENCES Generations,\n    ChapterNumber INT,\n    Title VARCHAR(500),\n    StartTimeMs BIGINT,\n    EndTimeMs BIGINT,\n    CharacterOffset INT\n);\n```\n\n**API Changes:**\n- Add output_format to CreateGenerationRequest: 'm4b_chaptered' | 'mp3_per_chapter' | 'mp3_single'\n- Add /api/v1/generations/{id}/chapters endpoint\n\n**Depends on:** voiceprocessor-api-2yp (chapter detection)","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-24T19:49:51.575919077-05:00","created_by":"wanerpena","updated_at":"2026-01-24T19:49:51.575919077-05:00","dependencies":[{"issue_id":"voiceprocessor-api-cyy","depends_on_id":"voiceprocessor-api-2yp","type":"blocks","created_at":"2026-01-24T19:49:57.726910473-05:00","created_by":"wanerpena"}]}
{"id":"voiceprocessor-api-d5g","title":"Add Google and GitHub OAuth Login","description":"Add Google and GitHub OAuth social login to VoiceProcessor API. Users can register/login via OAuth, and existing accounts are auto-linked when emails match. Endpoints: GET /oauth/{provider}/url, POST /oauth/{provider}/callback, GET/POST/DELETE for linking providers.","notes":"Implementation plan: Add OAuth social login with Google and GitHub providers. Auto-links accounts when emails match existing users. Follows iDesign architecture with OAuth engines, ExternalLogin accessor, and extended AuthManager.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-18T17:58:33.06678289-05:00","created_by":"wanerpena","updated_at":"2026-01-18T18:09:14.131249339-05:00","closed_at":"2026-01-18T18:09:14.131249339-05:00","close_reason":"Google and GitHub OAuth implementation complete - all 7 phases done, build passes"}
{"id":"voiceprocessor-api-dhj","title":"Create WebhooksController","description":"Create WebhooksController for POST /webhooks/stripe. Verify Stripe signature, handle checkout.session.completed event, add credits idempotently, log to PaymentHistory.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-23T22:57:00.509217636-05:00","created_by":"wanerpena","updated_at":"2026-01-23T23:07:52.958454722-05:00","closed_at":"2026-01-23T23:07:52.958454722-05:00","close_reason":"Created WebhooksController with POST /webhooks/stripe endpoint. Reads raw body, verifies Stripe signature, delegates to PaymentManager for idempotent processing."}
{"id":"voiceprocessor-api-dl6","title":"Create Stripe DTOs","description":"Create request/response DTOs: CreateCheckoutRequest (priceId, successUrl, cancelUrl), CheckoutResponse (checkoutUrl), CreditPackDto (priceId, name, credits, priceUsd, currency), CreditPacksResponse.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-23T22:56:54.88407268-05:00","created_by":"wanerpena","updated_at":"2026-01-23T23:00:29.811643955-05:00","closed_at":"2026-01-23T23:00:29.811643955-05:00","close_reason":"Created all Stripe DTOs: CreateCheckoutRequest, CheckoutResponse, CreditPackResponse, CreditPacksResponse, PaymentHistoryResponse, PaymentHistoryListResponse"}
{"id":"voiceprocessor-api-gf8","title":"Implement JWT + API Key Authentication","description":"Implement dual authentication: JWT for user sessions (15min access, 7-day refresh tokens) and API Keys for programmatic access (vp_ prefix, hashed storage). Both auth methods work on same endpoints. Includes registration, login, token refresh, logout, and API key management endpoints.","notes":"## Implementation Plan\n\n**Architecture (iDesign layers):**\n- Engines: JwtEngine, PasswordEngine, ApiKeyEngine (stateless crypto/token ops)\n- Managers: AuthManager (business logic, orchestration)\n- Accessors: RefreshTokenAccessor, ApiKeyAccessor (data access)\n- Clients.Api: Auth handlers, AuthController, CurrentUserService\n\n**New Entities:**\n- RefreshToken: token rotation, device tracking, expiry\n- ApiKey: vp_ prefix, SHA256 hashed, expiry support\n\n**User Entity Updates:**\n- PasswordHash, PasswordChangedAt, FailedLoginAttempts, LockoutEndsAt, LastLoginAt\n\n**API Endpoints:**\n- POST /auth/register - public\n- POST /auth/login - public  \n- POST /auth/refresh - public\n- POST /auth/logout - authenticated\n- GET /auth/me - authenticated\n- POST /auth/api-keys - authenticated\n- GET /auth/api-keys - authenticated\n- DELETE /auth/api-keys/{id} - authenticated\n\n**Security Features:**\n- PBKDF2 (100k iterations) for passwords\n- SHA256 for API keys\n- Refresh token rotation\n- Account lockout (5 attempts = 15min)\n- 15min JWT, 7-day refresh tokens\n\n**NuGet packages needed:**\n- Microsoft.IdentityModel.Tokens\n- System.IdentityModel.Tokens.Jwt\n- Microsoft.AspNetCore.Authentication.JwtBearer","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-18T16:38:07.988974363-05:00","created_by":"wanerpena","updated_at":"2026-01-18T17:01:47.338411828-05:00","closed_at":"2026-01-18T17:01:47.338411828-05:00","close_reason":"JWT + API Key authentication implementation complete. All phases implemented: Domain layer entities/DTOs, Engines for JWT/Password/ApiKey operations, Accessors for RefreshToken/ApiKey storage, AuthManager for business logic, Clients.Api handlers and AuthController, configuration, and database migration. Tested successfully: registration, login, JWT auth, API key creation, API key auth."}
{"id":"voiceprocessor-api-hpa","title":"Create Accessor interfaces","description":"Define Accessor layer interfaces: IUserAccessor, IVoiceAccessor, IGenerationAccessor, IGenerationChunkAccessor (database), ITtsProviderAccessor (TTS APIs), IStorageAccessor (blob storage).","notes":"Completed: Interfaces in Accessors/Contracts/. These were implemented in voiceprocessor-api-33n.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-18T13:47:17.310714765-05:00","created_by":"wanerpena","updated_at":"2026-01-18T14:26:27.722968157-05:00","closed_at":"2026-01-18T13:48:45.354893996-05:00","close_reason":"Accessor interfaces created for database, TTS providers, and storage"}
{"id":"voiceprocessor-api-kbl","title":"Create PaymentsController","description":"Create PaymentsController with endpoints: GET /api/v1/payments/packs (public, cached), POST /api/v1/payments/checkout (auth required), GET /api/v1/payments/history (auth required).","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-23T22:56:59.667323034-05:00","created_by":"wanerpena","updated_at":"2026-01-23T23:07:15.15593289-05:00","closed_at":"2026-01-23T23:07:15.15593289-05:00","close_reason":"Created PaymentsController with GET /packs (public), POST /checkout (auth), GET /history (auth) endpoints"}
{"id":"voiceprocessor-api-l2i","title":"Add A/B testing for voice preset optimization","description":"Track which voice presets produce the best user satisfaction to optimize parameter values over time.\n\n**Goal:**\nValidate and optimize the research-based preset values using real user feedback.\n\n**Implementation Ideas:**\n1. Generate 2 versions with slightly different settings\n2. Let user pick preferred version\n3. Track: preset used + rating given\n4. Analyze: which parameter values correlate with higher ratings\n\n**Data to Collect:**\n- Preset selected\n- User rating (1-5 or thumbs up/down)\n- Content length\n- Provider used\n\n**Analysis:**\n- Correlate ratings with preset choice\n- Identify if certain content lengths prefer different settings\n- A/B test parameter variations within presets\n\n**Depends on:**\n- voiceprocessor-api-7zu (voice presets feature)\n- voiceprocessor-api-1mm (feedback accessor)\n\n**Target Phase:** Beta (Mar 2026)","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-24T19:25:27.820564082-05:00","created_by":"wanerpena","updated_at":"2026-01-24T19:25:27.820564082-05:00","dependencies":[{"issue_id":"voiceprocessor-api-l2i","depends_on_id":"voiceprocessor-api-7zu","type":"blocks","created_at":"2026-01-24T19:25:33.162682831-05:00","created_by":"wanerpena"},{"issue_id":"voiceprocessor-api-l2i","depends_on_id":"voiceprocessor-api-1mm","type":"blocks","created_at":"2026-01-24T19:25:33.205908984-05:00","created_by":"wanerpena"}]}
{"id":"voiceprocessor-api-nrc","title":"Set up Railway deployment for backend API","description":"Configure Railway for .NET backend deployment. Includes: Railway project setup, PostgreSQL database provisioning, environment variables configuration, CI/CD from GitHub, custom domain setup. Target: production-ready for thousands of users.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T17:11:21.87598514-05:00","created_by":"wanerpena","updated_at":"2026-01-19T17:11:21.87598514-05:00"}
{"id":"voiceprocessor-api-oev","title":"Update UserAccessor with AddCreditsAsync","description":"Add AddCreditsAsync method to IUserAccessor and UserAccessor. Must be atomic: UPDATE users SET credits_remaining = credits_remaining + @amount WHERE id = @userId.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-23T22:56:57.913871918-05:00","created_by":"wanerpena","updated_at":"2026-01-23T23:04:01.390004915-05:00","closed_at":"2026-01-23T23:04:01.390004915-05:00","close_reason":"Added AddCreditsAsync method to IUserAccessor interface and UserAccessor implementation using atomic ExecuteUpdateAsync"}
{"id":"voiceprocessor-api-p71","title":"Add CreditsRequired field to CostEstimateResponse DTO","description":"## Problem\n\nThe `PricingEngine` calculates `CreditsRequired` for cost estimates, but this value is not exposed to API clients.\n\n**Current state:**\n- `PricingEngine.CalculateAllProviderEstimates()` returns `ProviderPriceEstimate` with `CreditsRequired`\n- `GenerationManager.EstimateCostAsync()` maps to `CostEstimateResponse` but DROPS the credits field\n- Frontend cannot display credits alongside dollar cost\n\n## Required Changes\n\n### 1. CostEstimateResponse.cs\nAdd top-level credits field:\n```csharp\npublic required int CreditsRequired { get; init; }\n```\n\n### 2. ProviderEstimate (in same file)\nAdd per-provider credits:\n```csharp\npublic int CreditsRequired { get; init; }\n```\n\n### 3. GenerationManager.cs (lines 100-115)\nUpdate mapping to include credits:\n```csharp\nreturn new CostEstimateResponse\n{\n    // ... existing fields ...\n    CreditsRequired = bestEstimate.CreditsRequired,  // ADD THIS\n    ProviderEstimates = providerEstimates.Select(pe =\u003e new ProviderEstimate\n    {\n        // ... existing fields ...\n        CreditsRequired = pe.CreditsRequired  // ADD THIS\n    }).ToList()\n};\n```\n\n## Files to Modify\n- `src/VoiceProcessor.Domain/DTOs/Responses/CostEstimateResponse.cs`\n- `src/VoiceProcessor.Managers/Generation/GenerationManager.cs`\n\n## Acceptance Criteria\n- [ ] `GET /api/generations/estimate` returns `creditsRequired` at top level\n- [ ] Each provider estimate includes `creditsRequired`\n- [ ] Existing tests pass\n- [ ] Credits calculation matches PricingEngine logic","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-24T20:01:51.742804487-05:00","created_by":"wanerpena","updated_at":"2026-01-25T15:08:37.856605564-05:00","closed_at":"2026-01-25T15:08:37.856605564-05:00","close_reason":"Successfully added CreditsRequired field to CostEstimateResponse and ProviderEstimate DTOs. Updated GenerationManager mapping to include credits from PricingEngine. Build passes with 0 errors. Changes committed in c3876d2."}
{"id":"voiceprocessor-api-pyc","title":"Create .NET solution structure with iDesign layers","description":"Create .NET 10 solution with iDesign architecture layers: Clients.Api, Managers, Engines, Accessors, Utilities, Domain. Set up project references following iDesign calling rules (top-to-bottom only).","notes":"Completed: Solution structure with numbered solution folders for IDE organization. All project references configured.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-17T22:52:57.386723075-05:00","created_by":"wanerpena","updated_at":"2026-01-18T14:25:49.128814835-05:00","closed_at":"2026-01-17T23:02:18.858156491-05:00","close_reason":"Solution structure created with iDesign layers"}
{"id":"voiceprocessor-api-rq2","title":"Implement PaymentManager","description":"Create IPaymentManager interface and PaymentManager. Methods: CreateCheckoutAsync (validate + create session), HandleWebhookAsync (idempotent credit addition), GetPaymentHistoryAsync.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-23T22:56:58.828265612-05:00","created_by":"wanerpena","updated_at":"2026-01-23T23:06:30.176218502-05:00","closed_at":"2026-01-23T23:06:30.176218502-05:00","close_reason":"Created IPaymentManager interface and PaymentManager implementation with GetCreditPacksAsync, CreateCheckoutAsync, HandleWebhookAsync, GetPaymentHistoryAsync. Includes idempotent webhook handling."}
{"id":"voiceprocessor-api-tkn","title":"Integrate Sentry for error tracking and APM","description":"Add Sentry SDK to both backend (.NET) and frontend (React). Covers: exception tracking with stack traces, performance monitoring/APM, user context for errors, release tracking, source maps for frontend, alerts configuration.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T17:11:29.071630216-05:00","created_by":"wanerpena","updated_at":"2026-01-19T17:11:29.071630216-05:00"}
{"id":"voiceprocessor-api-ulv","title":"Create API DTOs","description":"Create request DTOs (CreateGenerationRequest, EstimateCostRequest, SubmitFeedbackRequest) and response DTOs (GenerationResponse, CostEstimateResponse, VoiceResponse, ErrorResponse, PagedResponse\u003cT\u003e).","notes":"Completed: DTOs in Domain/DTOs/Requests/ and Domain/DTOs/Responses/. Using records with required properties.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-18T12:34:38.311140916-05:00","created_by":"wanerpena","updated_at":"2026-01-18T14:26:07.562351283-05:00","closed_at":"2026-01-18T12:37:24.73528129-05:00","close_reason":"Created request/response DTOs for API"}
{"id":"voiceprocessor-api-upe","title":"Implement Hangfire for background job processing","description":"Set up Hangfire for async TTS generation. Includes: Hangfire NuGet packages, PostgreSQL storage configuration, dashboard setup, job queue for generation processing. This unblocks the actual TTS workflow - currently CreateGenerationAsync has TODO at line 193.","notes":"Include scheduled voice catalog refresh job (daily/weekly) using RecurringJob.AddOrUpdate to sync new voices from providers.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-19T17:15:20.668868723-05:00","created_by":"wanerpena","updated_at":"2026-01-19T21:00:21.268105129-05:00","closed_at":"2026-01-19T21:00:21.268105129-05:00","close_reason":"Implemented Hangfire for background job processing with GenerationProcessor and scheduled voice refresh"}
{"id":"voiceprocessor-api-vlz","title":"Register Stripe services in DI","description":"Update ServiceCollectionExtensions in Accessors and Managers. Add Stripe.net NuGet package. Configure IMemoryCache for product caching.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-23T22:57:01.606279256-05:00","created_by":"wanerpena","updated_at":"2026-01-23T23:05:11.635320793-05:00","closed_at":"2026-01-23T23:05:11.635320793-05:00","close_reason":"Registered PaymentHistoryAccessor, StripeAccessor, StripeOptions in DI. Added AddMemoryCache for caching support."}
{"id":"voiceprocessor-api-xze","title":"Set up Cloudflare Pages for frontend deployment","description":"Configure Cloudflare Pages for React/Next.js frontend. Includes: Cloudflare project setup, build settings, environment variables, CI/CD from GitHub, custom domain and SSL. Benefits: unlimited bandwidth, global CDN, free tier.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T17:11:24.52633091-05:00","created_by":"wanerpena","updated_at":"2026-01-19T17:11:24.52633091-05:00"}
{"id":"voiceprocessor-api-yot","title":"Create PaymentHistory entity and migration","description":"Add PaymentHistory entity to Domain layer. Fields: Id, UserId, StripeSessionId, Amount, Currency, CreditsAdded, PackId, CreatedAt. Configure in DbContext and create EF migration.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-23T22:56:53.848913247-05:00","created_by":"wanerpena","updated_at":"2026-01-23T22:59:46.635357591-05:00","closed_at":"2026-01-23T22:59:46.635357591-05:00","close_reason":"Created PaymentHistory entity with all fields, added navigation property to User, configured in DbContext with proper indexes, created EF migration"}
{"id":"voiceprocessor-api-yqy","title":"Add text input character limits and validation","description":"Frontend textarea for manual text input needs character limits and UX guidance.\n\n**Limits Decided:**\n- Hard max: 500,000 characters (full novel)\n- Soft warning at 50,000: Suggest document upload\n- Cost warning at 100,000: Show estimated credits\n\n**UI Requirements:**\n- Live character counter: '45,230 / 500,000 characters'\n- Estimated cost display: '≈ 45,230 credits'\n- Warning message at 50K suggesting document upload\n- Block submission at 500K with error message\n\n**API Consideration:**\n- Optional: Add MaxLength validation to CreateGenerationRequest.Text (backend)\n\n**Business Context:**\n- Aligns with credit packs (15K-120K)\n- Supports full novel use case (~500K chars)\n- Encourages document upload for large content (deferred to Beta: voiceprocessor-api-7qe)","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-24T18:58:05.226361343-05:00","created_by":"wanerpena","updated_at":"2026-01-24T19:07:07.646288774-05:00","closed_at":"2026-01-24T19:07:07.646288774-05:00","close_reason":"Moved to voiceprocessor-web repository - this is primarily frontend work"}
{"id":"voiceprocessor-api-ytz","title":"Implement payment success/cancel callback pages","description":"## Frontend: Payment Success/Cancel Callback Pages\n\nCreate pages to handle Stripe checkout callbacks after payment completes or is cancelled.\n\n### URLs to Implement\n- `/payment/success` - Shown after successful payment\n- `/payment/cancel` - Shown if user cancels checkout\n\n### Success Page Requirements\n1. Display 'Payment Successful' confirmation\n2. Show purchased pack details (name, credits added)\n3. Refresh user credits from API\n4. 'Go to Dashboard' button\n5. Optional: Confetti animation\n\n### Cancel Page Requirements\n1. Display 'Payment Cancelled' message\n2. 'Try Again' button → returns to billing\n3. 'Contact Support' link\n\n### Technical Notes\n- Success URL receives `session_id` query param from Stripe\n- Can optionally verify session status via backend\n- Credits already added by webhook before redirect\n\n### Acceptance Criteria\n- [ ] /payment/success route created\n- [ ] /payment/cancel route created\n- [ ] Success page refreshes credits\n- [ ] Cancel page offers retry option\n- [ ] Both pages are responsive","status":"closed","priority":0,"issue_type":"feature","created_at":"2026-01-24T19:55:46.270000954-05:00","created_by":"wanerpena","updated_at":"2026-01-24T20:01:29.743353798-05:00","closed_at":"2026-01-24T20:01:29.743353798-05:00","close_reason":"Moved to voiceprocessor-web repository","dependencies":[{"issue_id":"voiceprocessor-api-ytz","depends_on_id":"voiceprocessor-api-9bv","type":"blocks","created_at":"2026-01-24T19:56:35.343540714-05:00","created_by":"wanerpena"}]}
{"id":"voiceprocessor-api-z3f","title":"Implement API rate limiting","description":"Add rate limiting to protect API. Includes: AspNetCoreRateLimit package, per-user and per-IP limits, different limits by subscription tier, 429 responses with retry-after header. Prevents abuse and ensures fair usage.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T17:15:44.520754947-05:00","created_by":"wanerpena","updated_at":"2026-01-19T17:15:44.520754947-05:00"}
{"id":"voiceprocessor-web-04s","title":"Real-time generation progress via SignalR","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-19T21:55:36.585705618-05:00","created_by":"wanerpena","updated_at":"2026-01-19T21:55:36.585705618-05:00"}
{"id":"voiceprocessor-web-0mt","title":"Display credits alongside dollar cost on generation page","description":"## Cost Display on Generation Page\n\nDisplay both credits AND dollar cost when users estimate generation cost.\n\n### Format\nShow: **\"12,450 credits ($2.49)\"**\n\n### UX Research Finding\nBest practice from UX research: Show BOTH formats together\n- Credits: Primary currency users understand (what they bought)\n- Dollars: Reference point for real-world value\n\n### Implementation\n1. Call `GET /api/v1/generations/estimate` \n2. Response includes `creditsRequired` (after API fix) and `estimatedCost`\n3. Display in format: `{credits} credits (${cost})`\n\n### Location\n- Generation page cost estimate section\n- Before \"Generate\" button\n\n### Backend Dependency\n- Requires `voiceprocessor-api-p71` (Add CreditsRequired to CostEstimateResponse)\n\n### Acceptance Criteria\n- [ ] Cost estimate shows credits and dollars\n- [ ] Format: \"X,XXX credits ($Y.YY)\"\n- [ ] Updates dynamically as text changes\n- [ ] Per-provider breakdown also shows credits","status":"open","priority":1,"issue_type":"feature","created_at":"2026-01-24T20:04:26.441115807-05:00","created_by":"wanerpena","updated_at":"2026-01-24T20:04:41.331156295-05:00"}
{"id":"voiceprocessor-web-0y9","title":"Add output format selection (M4B chapters vs MP3 per chapter)","description":"## Output Format Selection\n\nAllow users to choose between audiobook format (M4B with chapters) or individual MP3 files per chapter.\n\n### Options (from planning session)\n| Format | Description | Use Case |\n|--------|-------------|----------|\n| M4B with Chapters | Single file, chapter markers embedded | Audiobook players, Apple Books |\n| MP3 per Chapter | Separate file for each chapter | Flexibility, sharing individual chapters |\n\n### Decision: Offer BOTH\nUser selects their preferred format before generation.\n\n### UI Design\n1. Radio button or toggle group\n2. Label: \"Output Format\"\n3. Options:\n   - \"Single Audiobook (M4B)\" - default\n   - \"Separate Files (MP3 per chapter)\"\n4. Brief explanation of each format\n\n### Backend Dependency\n- Requires `voiceprocessor-api-2yp` (Chapter detection)\n- Requires `voiceprocessor-api-cyy` (Chapter markers in audio)\n- API must support output format parameter\n\n### Acceptance Criteria\n- [ ] Format selection UI on generation page\n- [ ] Two options: M4B single file, MP3 per chapter\n- [ ] Default to M4B\n- [ ] Selection sent to API\n- [ ] Help text explains difference","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-24T20:04:29.125903362-05:00","created_by":"wanerpena","updated_at":"2026-01-24T20:05:01.810819257-05:00"}
{"id":"voiceprocessor-web-1pf","title":"Fix hydration mismatch issues","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-19T14:32:34.935367827-05:00","created_by":"wanerpena","updated_at":"2026-01-19T14:32:46.789109713-05:00","closed_at":"2026-01-19T14:32:46.789109713-05:00","close_reason":"Completed in session"}
{"id":"voiceprocessor-web-27x","title":"Forgot password flow","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-19T21:55:34.256869314-05:00","created_by":"wanerpena","updated_at":"2026-01-19T21:55:34.256869314-05:00"}
{"id":"voiceprocessor-web-2iv","title":"Create CLAUDE.md with project guidelines","notes":"Created locally, NOT tracked in git (excluded by global ~/.gitignore_global). Contains: tech stack, commands, architecture, commit message rules (no AI attribution, natural style). Backend path: /home/wanerpena/Documents/Projects/voiceprocessor-api","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-18T13:47:11.120249376-05:00","created_by":"wanerpena","updated_at":"2026-01-18T13:51:29.756017732-05:00","closed_at":"2026-01-18T13:47:21.824674618-05:00","close_reason":"Closed"}
{"id":"voiceprocessor-web-2w0","title":"Add voice favorites feature","description":"Heart button on voice cards to save favorites. Persist to backend. Filter by favorites in VoiceSelector","notes":"Added favoriteVoices to uiStore with persist. VoiceSelector now has: heart icon on each voice card, 'Favorites' filter button with count badge, filter by favorites only mode. Favorites persisted to localStorage.","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-18T14:34:56.61054359-05:00","created_by":"wanerpena","updated_at":"2026-01-18T16:29:07.61870739-05:00","closed_at":"2026-01-18T16:29:07.61870739-05:00","close_reason":"Closed"}
{"id":"voiceprocessor-web-3do","title":"Build VoiceSelector component","description":"Voice cards with sample playback, filters by language/style, provider badges, quality indicators","notes":"Created src/components/VoiceSelector/. Features: voice cards with sample playback, filter by language/provider/style/search, provider color badges, quality indicators. Uses Audio API for samples.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-18T13:47:56.727026378-05:00","created_by":"wanerpena","updated_at":"2026-01-18T14:09:39.229291645-05:00","closed_at":"2026-01-18T14:09:39.229291645-05:00","close_reason":"Closed"}
{"id":"voiceprocessor-web-3iu","title":"Add API auth interceptor","description":"Add Bearer token to API requests. Get token from auth store. Handle 401 responses","notes":"Added auth middleware to openapi-fetch client. Adds Bearer token from authStore to all requests. Handles 401 responses by logging out user and redirecting to /login.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-18T14:34:55.081304185-05:00","created_by":"wanerpena","updated_at":"2026-01-18T14:39:58.872090979-05:00","closed_at":"2026-01-18T14:39:58.872090979-05:00","close_reason":"Closed","dependencies":[{"issue_id":"voiceprocessor-web-3iu","depends_on_id":"voiceprocessor-web-atv","type":"blocks","created_at":"2026-01-18T14:35:06.017092679-05:00","created_by":"wanerpena"}]}
{"id":"voiceprocessor-web-5uc","title":"Fetch real usage stats for billing page","description":"## Replace Hardcoded Usage Stats\n\n### Current State\nThe billing page (`src/app/(app)/settings/billing/page.tsx:20-25`) has hardcoded mock usage data:\n\n```typescript\nconst usage = {\n  charactersUsed: 45000,\n  charactersLimit: 100000,\n  generationsCount: 23,\n  totalAudioMinutes: 156,\n};\n```\n\n### Required\nFetch real usage data from the backend API.\n\n### Backend Endpoint\nLikely: `GET /api/v1/user/usage` or similar\n\nCheck if endpoint exists, or create issue in voiceprocessor-api if needed.\n\n### Implementation\n1. Create/use `useUsage()` hook (may already exist in `src/hooks/`)\n2. Fetch on billing page mount\n3. Show loading skeleton during fetch\n4. Handle error state gracefully\n\n### Acceptance Criteria\n- [ ] Usage stats fetched from API\n- [ ] Characters used/limit displayed correctly\n- [ ] Generations count is real\n- [ ] Audio minutes is real\n- [ ] Loading state during fetch\n- [ ] Error handling if API fails","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T00:43:14.394671698-05:00","created_by":"wanerpena","updated_at":"2026-01-25T00:43:14.394671698-05:00"}
{"id":"voiceprocessor-web-6d4","title":"Build AudioPlayer component","description":"Waveform visualization with wavesurfer.js, playback controls, speed control, chapter markers, download button","notes":"Created src/components/AudioPlayer/. Features: wavesurfer.js waveform visualization, play/pause/seek, skip 10s buttons, playback rate (0.5x-2x), chapter navigation, MP3/WAV download buttons.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-18T13:48:07.060318329-05:00","created_by":"wanerpena","updated_at":"2026-01-18T14:11:05.157987492-05:00","closed_at":"2026-01-18T14:11:05.157987492-05:00","close_reason":"Closed","dependencies":[{"issue_id":"voiceprocessor-web-6d4","depends_on_id":"voiceprocessor-web-smy","type":"blocks","created_at":"2026-01-18T13:48:55.410828525-05:00","created_by":"wanerpena"}]}
{"id":"voiceprocessor-web-7i2","title":"Set up Playwright for E2E testing","description":"Install and configure Playwright for end-to-end tests","notes":"Added @playwright/test ^1.49.0. Created playwright.config.ts with Chrome/Firefox/Safari projects. E2E tests in tests/e2e/. Added sample test. Run pnpm dlx playwright install after pnpm install.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-18T13:47:53.488032072-05:00","created_by":"wanerpena","updated_at":"2026-01-18T14:03:28.143192684-05:00","closed_at":"2026-01-18T14:03:28.143192684-05:00","close_reason":"Closed"}
{"id":"voiceprocessor-web-7xu","title":"Create app pages structure","description":"Create page routes: /, /dashboard, /generate, /generations, /generations/[id], /voices, /settings, /api-docs","notes":"Created all page routes: / (landing), /dashboard, /generate, /generations, /generations/[id], /voices, /settings, /api-docs. Pages are functional placeholders ready for component integration.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-18T13:47:54.644175252-05:00","created_by":"wanerpena","updated_at":"2026-01-18T14:07:38.743251819-05:00","closed_at":"2026-01-18T14:07:38.743251819-05:00","close_reason":"Closed"}
{"id":"voiceprocessor-web-8t8","title":"Read user credits from auth response","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-19T14:32:36.900500011-05:00","created_by":"wanerpena","updated_at":"2026-01-19T14:32:46.800566-05:00","closed_at":"2026-01-19T14:32:46.800566-05:00","close_reason":"Completed in session"}
{"id":"voiceprocessor-web-9cg","title":"Build TextInput component","description":"TextArea with character count, file upload (txt, docx, pdf), language auto-detection badge","notes":"Created src/components/TextInput/. Features: textarea with char count, drag-drop file upload, language detection badge display, content type indicator. Supports txt files (pdf/docx need backend).","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-18T13:47:55.796421687-05:00","created_by":"wanerpena","updated_at":"2026-01-18T14:09:39.218678311-05:00","closed_at":"2026-01-18T14:09:39.218678311-05:00","close_reason":"Closed"}
{"id":"voiceprocessor-web-9dj","title":"Generation detail page with audio player","status":"open","priority":1,"issue_type":"feature","created_at":"2026-01-19T21:55:23.31454805-05:00","created_by":"wanerpena","updated_at":"2026-01-19T21:55:23.31454805-05:00"}
{"id":"voiceprocessor-web-9hi","title":"OAuth connections settings (Google/GitHub)","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-19T21:55:31.963888005-05:00","created_by":"wanerpena","updated_at":"2026-01-19T21:55:31.963888005-05:00"}
{"id":"voiceprocessor-web-9t1","title":"Voice preview playback","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-19T21:55:27.108781688-05:00","created_by":"wanerpena","updated_at":"2026-01-19T21:55:27.108781688-05:00"}
{"id":"voiceprocessor-web-a1v","title":"Add eslint-disable comment for intentional empty deps in AuthProvider","description":"## Problem\n\nAuthProvider has a useEffect with an empty dependency array that intentionally runs once on mount:\n\n```typescript\nuseEffect(() =\u003e {\n  const validateSession = async () =\u003e {\n    // Uses: isAuthenticated, login, logout, setLoading\n  };\n  validateSession();\n}, []); // Empty deps - intentional\n```\n\nESLint's react-hooks/exhaustive-deps rule may warn about missing dependencies.\n\n## Why Empty Deps is Correct\n- Session validation should only run ONCE on initial mount\n- Adding deps would cause re-validation on every state change (infinite loop risk)\n- This is a common pattern for 'run once on mount' effects\n\n## Solution\nAdd eslint-disable comment to suppress the warning:\n\n```typescript\n// eslint-disable-next-line react-hooks/exhaustive-deps\n}, []);\n```\n\n## File\n- `src/components/AuthProvider.tsx`\n\n## Acceptance Criteria\n- [ ] No ESLint warning for this useEffect\n- [ ] Comment explains why deps are intentionally empty","status":"open","priority":3,"issue_type":"task","owner":"wanerpena@gmail.com","created_at":"2026-01-27T01:11:36.015580111-05:00","created_by":"Waner Pena","updated_at":"2026-01-27T01:11:49.641738847-05:00"}
{"id":"voiceprocessor-web-add","title":"Set up shadcn/ui","description":"Initialize shadcn/ui component library with Tailwind integration","notes":"Added deps: class-variance-authority, clsx, tailwind-merge, lucide-react. Created components.json (new-york style), src/lib/utils.ts with cn(). User needs pnpm install then can run: pnpm dlx shadcn@latest add button (etc)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-18T13:47:37.27437882-05:00","created_by":"wanerpena","updated_at":"2026-01-18T14:01:03.570264779-05:00","closed_at":"2026-01-18T14:01:03.570264779-05:00","close_reason":"Closed","dependencies":[{"issue_id":"voiceprocessor-web-add","depends_on_id":"voiceprocessor-web-b41","type":"blocks","created_at":"2026-01-18T13:48:50.036784627-05:00","created_by":"wanerpena"}]}
{"id":"voiceprocessor-web-atv","title":"Add authentication pages and state","description":"Sign up, login, forgot password pages. Auth state with Zustand. OAuth buttons for Google/GitHub","notes":"Created authStore with user/token/isAuthenticated state, persist middleware. Auth pages: /login, /signup, /forgot-password with (auth) route group layout. Forms use react-hook-form + zod. OAuth buttons for Google/GitHub (UI only).","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-18T14:34:53.50284779-05:00","created_by":"wanerpena","updated_at":"2026-01-18T14:39:19.430689249-05:00","closed_at":"2026-01-18T14:39:19.430689249-05:00","close_reason":"Closed"}
{"id":"voiceprocessor-web-b41","title":"Add core dependencies","description":"Install TanStack Query, Zustand, React Hook Form, Zod for state management and forms","notes":"Added to package.json: @tanstack/react-query ^5.62.0, zustand ^5.0.2, react-hook-form ^7.54.0, zod ^3.24.0, @hookform/resolvers ^3.9.1. User needs to run pnpm install (package manager not available in sandbox).","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-18T13:47:36.401021763-05:00","created_by":"wanerpena","updated_at":"2026-01-18T13:59:19.737009955-05:00","closed_at":"2026-01-18T13:59:19.737009955-05:00","close_reason":"Closed","dependencies":[{"issue_id":"voiceprocessor-web-b41","depends_on_id":"voiceprocessor-web-rhe","type":"blocks","created_at":"2026-01-18T13:48:48.630320967-05:00","created_by":"wanerpena"}]}
{"id":"voiceprocessor-web-bjl","title":"Build GenerationStatus component","description":"Progress bar, current step indicator, estimated time remaining, real-time updates via SignalR","notes":"Created src/components/GenerationStatus/. Features: status badge, progress bar with percentage, current step indicator, estimated time remaining, error display. Integrates with SignalR hub via useGenerationHub hook.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-18T13:48:08.567445008-05:00","created_by":"wanerpena","updated_at":"2026-01-18T14:11:05.168771485-05:00","closed_at":"2026-01-18T14:11:05.168771485-05:00","close_reason":"Closed","dependencies":[{"issue_id":"voiceprocessor-web-bjl","depends_on_id":"voiceprocessor-web-d8k","type":"blocks","created_at":"2026-01-18T13:49:01.65909972-05:00","created_by":"wanerpena"}]}
{"id":"voiceprocessor-web-c83","title":"Auto-refresh credits after successful payment","description":"## Frontend: Auto-refresh Credits After Payment\n\nEnsure user credits are updated immediately after successful Stripe payment.\n\n### Problem\nAfter Stripe checkout, user redirects to success page but may see stale credit balance until page refresh.\n\n### Solution\n1. On success page mount, fetch updated user profile\n2. Update global credits state\n3. Show toast notification confirming credits added\n\n### Implementation\n1. Call GET /api/v1/auth/me or user endpoint to get fresh credits\n2. Update user context/store with new creditsRemaining\n3. Display toast: Added 10,000 credits to your account\n4. Dashboard should reflect new balance without refresh\n\n### Technical Notes\n- Webhook processing adds credits before user redirects\n- Success page should always show updated credits\n- Consider using React Query invalidation or similar\n\n### Acceptance Criteria\n- [ ] Credits refresh on success page\n- [ ] Dashboard shows updated balance\n- [ ] Toast notification confirms purchase\n- [ ] No manual refresh needed","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-24T20:00:55.028375661-05:00","created_by":"wanerpena","updated_at":"2026-01-25T18:14:21.438464236-05:00","closed_at":"2026-01-25T18:14:21.438464236-05:00","close_reason":"Implemented auto-refresh credits and toast notification on payment success","dependencies":[{"issue_id":"voiceprocessor-web-c83","depends_on_id":"voiceprocessor-web-snu","type":"blocks","created_at":"2026-01-24T20:01:01.543894267-05:00","created_by":"wanerpena"}]}
{"id":"voiceprocessor-web-chw","title":"Implement text input character limits with warnings","description":"## Text Input Character Limits\n\nImplement character limits for manual text input on generation page.\n\n### Limits (from planning session)\n| Threshold | Action |\n|-----------|--------|\n| 50,000 chars | **Soft warning**: \"This is a long text. Consider uploading a file instead.\" |\n| 100,000 chars | **Cost warning**: \"This will cost approximately X credits\" |\n| 500,000 chars | **Hard max**: Prevent input, show error |\n\n### Why These Numbers\n- 50k = ~12,500 words = short novel/long article\n- 500k = ~125,000 words = full novel (hard limit)\n- Aligns with planned document upload feature (Beta)\n\n### Implementation\n1. Add character counter below text input\n2. Show counter as: \"12,345 / 500,000 characters\"\n3. Change color at thresholds (yellow at 50k, orange at 100k, red near 500k)\n4. Show contextual warnings at thresholds\n5. Disable Generate button at 500k+\n\n### Acceptance Criteria\n- [ ] Character counter displayed\n- [ ] Soft warning at 50k (non-blocking)\n- [ ] Cost warning at 100k\n- [ ] Hard block at 500k\n- [ ] Clear error message at limit\n- [ ] Counter color changes at thresholds","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-24T20:04:26.983838847-05:00","created_by":"wanerpena","updated_at":"2026-01-24T20:04:49.110089425-05:00"}
{"id":"voiceprocessor-web-csq","title":"Build FeedbackForm component","description":"Star rating, quick tags (too fast, pronunciation, etc), comment field for rating generations","notes":"Created src/components/FeedbackForm/. Features: 5-star rating, quick tags (too fast, too slow, pronunciation, unnatural, great quality, perfect pacing), comment textarea, submit with success state.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-18T14:34:50.559191112-05:00","created_by":"wanerpena","updated_at":"2026-01-18T14:41:19.383061706-05:00","closed_at":"2026-01-18T14:41:19.383061706-05:00","close_reason":"Closed"}
{"id":"voiceprocessor-web-cum","title":"Fix ESLint errors in auth and navigation components","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T14:58:44.344738056-05:00","created_by":"wanerpena","updated_at":"2026-01-25T14:58:44.344738056-05:00"}
{"id":"voiceprocessor-web-d3c","title":"Implement Mock Payment Integration","description":"Create frontend service to simulate checkout process. createCheckoutSession(packId) and verifyPayment(sessionId). Handle success/cancel redirects.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-23T22:44:11.355160386-05:00","created_by":"wanerpena","updated_at":"2026-01-23T22:51:54.449508425-05:00","closed_at":"2026-01-23T22:51:54.449508425-05:00","close_reason":"Closed"}
{"id":"voiceprocessor-web-d8k","title":"Add SignalR client for real-time updates","description":"Install @microsoft/signalr and create GenerationHub client for live progress updates","notes":"Added @microsoft/signalr ^8.0.7. Created src/lib/signalr/{connection,index}.ts with typed hub events (StatusUpdate, Progress, Completed, Failed). Created src/hooks/useGenerationHub.ts hook that integrates with React Query cache.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-18T13:47:38.379652043-05:00","created_by":"wanerpena","updated_at":"2026-01-18T14:02:21.921353633-05:00","closed_at":"2026-01-18T14:02:21.921353633-05:00","close_reason":"Closed"}
{"id":"voiceprocessor-web-dry","title":"Update CostEstimate with Premium Warning","description":"Display 'Premium Quality (2x Credits)' badge for high-cost providers (ElevenLabs High Quality). Highlight 'Best Value' for Balanced strategy.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-23T22:44:15.272364294-05:00","created_by":"wanerpena","updated_at":"2026-01-23T22:44:15.272364294-05:00"}
{"id":"voiceprocessor-web-e07","title":"Integrate payment history in billing settings","description":"## Frontend: Payment History Integration\n\nConnect the payment history table in billing settings to the backend API.\n\n### Backend Endpoint (Ready)\nGET /api/v1/payments/history - Returns users payment history\n\n### API Response Example\n{\n  payments: [\n    {\n      id: uuid,\n      packName: Starter Pack,\n      creditsAdded: 10000,\n      amountPaid: 9.99,\n      currency: usd,\n      status: completed,\n      createdAt: 2026-01-24T12:00:00Z\n    }\n  ]\n}\n\n### Implementation\n1. Call API on billing page load\n2. Populate existing payment history table\n3. Format dates and currency properly\n4. Handle empty state (no payments yet)\n\n### Acceptance Criteria\n- [ ] Payment history fetched from API\n- [ ] Table displays date, pack, amount, status\n- [ ] Empty state shown for new users\n- [ ] Loading skeleton during fetch","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-24T20:00:45.064241797-05:00","created_by":"wanerpena","updated_at":"2026-01-25T15:43:53.270119757-05:00","closed_at":"2026-01-25T15:43:53.270119757-05:00","close_reason":"Payment history integration complete. Added types, service method, and UI table with loading/empty states."}
{"id":"voiceprocessor-web-exx","title":"Create Zustand stores","description":"Create uiStore for client state: selectedVoice, routingStrategy, isGenerating","notes":"Created src/stores/uiStore.ts with persist middleware. State: selectedVoice, routingStrategy (cost|quality|speed|balanced), isGenerating. UI preferences persisted to localStorage.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-18T13:48:09.972657032-05:00","created_by":"wanerpena","updated_at":"2026-01-18T14:05:33.715925037-05:00","closed_at":"2026-01-18T14:05:33.715925037-05:00","close_reason":"Closed","dependencies":[{"issue_id":"voiceprocessor-web-exx","depends_on_id":"voiceprocessor-web-b41","type":"blocks","created_at":"2026-01-18T13:48:51.367181612-05:00","created_by":"wanerpena"}]}
{"id":"voiceprocessor-web-fac","title":"Enhance landing page","description":"Add pricing tiers section, feature highlights with icons, interactive demo section","notes":"Enhanced landing page with: Hero section with gradient, live demo section with voice selector, 6 feature cards with icons, 3-tier pricing (Free/Pro/Enterprise) with highlighted Pro plan, CTA section, footer with 4-column layout.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-18T14:34:58.132106394-05:00","created_by":"wanerpena","updated_at":"2026-01-18T14:42:48.562591554-05:00","closed_at":"2026-01-18T14:42:48.562591554-05:00","close_reason":"Closed"}
{"id":"voiceprocessor-web-hbm","title":"Integrate Stripe checkout for credit pack purchases","description":"## Frontend: Stripe Checkout \u0026 Credit Packs Billing Page\n\nRefactor billing page to support credit packs model and integrate with Stripe checkout.\n\n### Backend Endpoints (Ready \u0026 Tested)\n- GET /api/v1/payments/packs - Returns available credit packs with prices\n- POST /api/v1/payments/checkout - Creates Stripe checkout session, returns checkoutUrl\n- GET /api/v1/payments/history - Returns payment history\n\n### Billing Page Requirements\n1. Display current credit balance prominently\n2. Show available credit pack cards with name, credits, and price\n3. Buy button for each pack triggers Stripe checkout\n4. Payment history section (can link to voiceprocessor-web-e07)\n\n### Implementation Steps\n1. Fetch credit packs from API on billing page load\n2. Display packs as cards (e.g., Short Story $0.99, Novella $9.99, Audiobook $49.99)\n3. On Buy click, call checkout endpoint with priceId\n4. Redirect user to returned checkoutUrl from Stripe\n\n### Acceptance Criteria\n- [ ] Credit balance displayed on billing page\n- [ ] Credit pack cards shown with prices\n- [ ] Buy button triggers checkout flow\n- [ ] User redirected to Stripe checkout\n- [ ] Loading states during API calls\n- [ ] Error handling for failed requests\n\nConsolidates: voiceprocessor-web-o7x","status":"closed","priority":0,"issue_type":"feature","created_at":"2026-01-24T20:00:25.115561717-05:00","created_by":"wanerpena","updated_at":"2026-01-24T21:09:17.886001237-05:00","closed_at":"2026-01-24T21:09:17.886001237-05:00","close_reason":"Stripe checkout integration complete. All tasks finished: credit balance display, credit pack cards, API integration, checkout flow. Ready for PR and QA."}
{"id":"voiceprocessor-web-hcl","title":"Add voice parameter preset selector","description":"## Voice Parameter Preset Selector\n\nAdd dropdown to select voice parameter presets optimized for different content types.\n\n### Presets (from planning session)\n| Preset | Stability | Similarity | Speed | Use Case |\n|--------|-----------|------------|-------|----------|\n| Audiobook | 0.70 | 0.80 | 1.0 | Long-form narration, consistency |\n| Conversational | 0.50 | 0.75 | 1.05 | Podcasts, casual content |\n| Dramatic | 0.35 | 0.70 | 0.95 | Fiction, emotional scenes |\n| Professional | 0.80 | 0.85 | 1.0 | Business, formal content |\n\n### UI Design\n1. Dropdown labeled \"Style\" or \"Preset\"\n2. Options: Audiobook (default), Conversational, Dramatic, Professional\n3. Show brief description on hover/selection\n4. Optional: \"Custom\" option to manually adjust parameters (future)\n\n### Backend Dependency\n- Requires `voiceprocessor-api-7zu` (Add voice parameter presets)\n- API will accept preset name and map to parameters\n\n### Acceptance Criteria\n- [ ] Preset dropdown on generation page\n- [ ] 4 presets available\n- [ ] Default to \"Audiobook\"\n- [ ] Selection sent to API with generation request\n- [ ] Tooltip/description explains each preset","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-24T20:04:28.111621491-05:00","created_by":"wanerpena","updated_at":"2026-01-24T20:04:55.35193602-05:00"}
{"id":"voiceprocessor-web-k3k","title":"Remove console.log statements from auth code (production cleanup)","description":"## Problem\n\nPR #10 added console.log statements for debugging auth flows that will be visible to users in production:\n\n```typescript\n// AuthProvider.tsx\nconsole.log('Session validated');\nconsole.log('Session invalid, logging out');\nconsole.log('Session validation failed, logging out');\n\n// authStore.ts  \nconsole.log('Legacy token cleaned up');\n```\n\n## Why It Matters\n- Users can see these in browser DevTools\n- Unprofessional appearance\n- May leak implementation details\n\n## Solution Options\n\n1. **Remove entirely** - Simplest, if logging not needed\n2. **Use proper logger** - Follow AGENTS.md logging standards with environment check\n3. **Use debug level** - Only show in development\n\n## Files\n- `src/components/AuthProvider.tsx`\n- `src/stores/authStore.ts`\n\n## Acceptance Criteria\n- [ ] No console.log visible in production browser console\n- [ ] Auth flows still work correctly\n- [ ] (Optional) Debug logging available in development","status":"open","priority":2,"issue_type":"task","owner":"wanerpena@gmail.com","created_at":"2026-01-27T01:11:35.101030207-05:00","created_by":"Waner Pena","updated_at":"2026-01-27T01:11:44.785491104-05:00"}
{"id":"voiceprocessor-web-lor","title":"Build CostEstimate component","description":"Provider options comparison, quality vs cost visualization, credits remaining display","notes":"Created src/components/CostEstimate/. Features: provider comparison, cost/duration/quality display, credits remaining, expandable provider comparison table. Uses routingStrategy from uiStore.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-18T13:47:57.787299112-05:00","created_by":"wanerpena","updated_at":"2026-01-18T14:09:39.239721014-05:00","closed_at":"2026-01-18T14:09:39.239721014-05:00","close_reason":"Closed"}
{"id":"voiceprocessor-web-n30","title":"Set up git remote and push initial commit","notes":"Remote: git@github.com:waner11/voiceprocessor-web.git. Git identity configured locally (not global): Waner Pena \u003cwanerpena@gmail.com\u003e","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-18T13:47:12.031501915-05:00","created_by":"wanerpena","updated_at":"2026-01-18T13:52:09.482501875-05:00","closed_at":"2026-01-18T13:47:21.845463454-05:00","close_reason":"Closed"}
{"id":"voiceprocessor-web-o7x","title":"Implement Credit Packs Billing Page","description":"Refactor billing page to support 'Credit Packs' model instead of subscriptions. Show credit balance, pack cards (Short Story .99, Novella 9.99, Audiobook 9.99), and history.","status":"closed","priority":4,"issue_type":"feature","created_at":"2026-01-19T21:55:38.798254632-05:00","created_by":"wanerpena","updated_at":"2026-01-24T20:05:59.2575739-05:00","closed_at":"2026-01-24T20:05:59.2575739-05:00","close_reason":"Consolidated into voiceprocessor-web-hbm (Stripe checkout integration)"}
{"id":"voiceprocessor-web-p9f","title":"Security: JWT token stored in localStorage (XSS vulnerable)","description":"## Security Vulnerability: JWT in localStorage\n\n### Problem\nThe auth token is stored in localStorage via Zustand's persist middleware (`src/stores/authStore.ts`).\n\n```typescript\npersist(\n  // ...\n  {\n    name: \"voiceprocessor-auth\",  // Stored in localStorage\n  }\n)\n```\n\n### Risk\n**XSS Attack Vector**: Any JavaScript running on the page (including from compromised dependencies or XSS vulnerabilities) can access `localStorage.getItem('voiceprocessor-auth')` and steal the JWT token.\n\n### Severity\n**High** - Token theft allows full account takeover.\n\n### Solutions (Pick One)\n\n| Option | Pros | Cons |\n|--------|------|------|\n| **HttpOnly Cookies** | Cannot be accessed by JS, automatic CSRF protection with SameSite | Requires backend changes |\n| **BFF Pattern** | Token never reaches browser | More infrastructure |\n| **Memory-only + Refresh Token** | Short-lived access token in memory, refresh via HttpOnly cookie | Complex implementation |\n\n### Recommended: HttpOnly Cookies\n1. Backend sets JWT in HttpOnly, Secure, SameSite=Strict cookie\n2. Frontend removes token from Zustand persist\n3. API client relies on cookies (credentials: 'include')\n\n### Acceptance Criteria\n- [ ] JWT not accessible via JavaScript\n- [ ] Auth persists across page refreshes\n- [ ] CSRF protection in place\n- [ ] Logout clears auth state","notes":"## ✅ PR Created: #10\n\n**Status**: Implementation complete, PR ready for review\n\n### Pull Request\nhttps://github.com/waner11/voiceprocessor-web/pull/10\n\n### Summary\n- All code implementation complete (6 files modified)\n- Security vulnerability FIXED at code level\n- 4 commits on feature branch voiceprocessor-web-p9f\n- Build succeeds, TypeScript compiles\n- Manual testing pending (requires PostgreSQL database)\n\n### Next Steps\n1. Review PR\n2. Set up PostgreSQL database\n3. Run manual browser tests\n4. Merge PR\n5. Close issue\n\nSee PR description for full details and testing instructions.","status":"in_progress","priority":1,"issue_type":"bug","created_at":"2026-01-25T00:39:43.75111439-05:00","created_by":"wanerpena","updated_at":"2026-01-26T22:07:17.015089825-05:00"}
{"id":"voiceprocessor-web-r6z","title":"Create TanStack Query hooks","description":"Create hooks: useGenerations, useGeneration, useCreateGeneration, useVoices, useUsage","notes":"Created hooks: useGenerations, useGeneration (with auto-refetch when processing), useCreateGeneration, useGenerationEstimate, useVoices, useVoice, useUsage. Created providers.tsx with QueryClientProvider. Added devtools.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-18T13:48:11.275475024-05:00","created_by":"wanerpena","updated_at":"2026-01-18T14:05:33.727742906-05:00","closed_at":"2026-01-18T14:05:33.727742906-05:00","close_reason":"Closed","dependencies":[{"issue_id":"voiceprocessor-web-r6z","depends_on_id":"voiceprocessor-web-b41","type":"blocks","created_at":"2026-01-18T13:48:52.704715751-05:00","created_by":"wanerpena"},{"issue_id":"voiceprocessor-web-r6z","depends_on_id":"voiceprocessor-web-r9m","type":"blocks","created_at":"2026-01-18T13:48:54.086638412-05:00","created_by":"wanerpena"}]}
{"id":"voiceprocessor-web-r9m","title":"Set up API client with openapi-typescript","description":"Install openapi-typescript and openapi-fetch, configure generate:api script to sync with backend OpenAPI spec","notes":"Added openapi-typescript (dev) + openapi-fetch. Created src/lib/api/{client,types,index}.ts. types.ts is placeholder - run pnpm generate:api --spec=URL to populate from backend OpenAPI spec.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-18T13:47:40.459802374-05:00","created_by":"wanerpena","updated_at":"2026-01-18T14:01:03.58008793-05:00","closed_at":"2026-01-18T14:01:03.58008793-05:00","close_reason":"Closed"}
{"id":"voiceprocessor-web-rhe","title":"Set up project directory structure","description":"Create directories: src/components, src/features, src/hooks, src/lib, src/stores, src/types per architecture docs","notes":"Structure from FRONTEND_DESIGN.md. Empty dirs already exist (src/, tests/, public/) but need: components/, features/, hooks/, lib/, stores/, types/ under src/","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-18T13:47:35.509029269-05:00","created_by":"wanerpena","updated_at":"2026-01-18T13:56:43.284920427-05:00","closed_at":"2026-01-18T13:56:43.284920427-05:00","close_reason":"Closed"}
{"id":"voiceprocessor-web-sh0","title":"Connect API keys settings page to backend","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-19T14:32:38.632357292-05:00","created_by":"wanerpena","updated_at":"2026-01-19T14:32:46.810899283-05:00","closed_at":"2026-01-19T14:32:46.810899283-05:00","close_reason":"Completed in session"}
{"id":"voiceprocessor-web-slu","title":"Initialize Next.js project with TypeScript and Tailwind","notes":"Used fnm (Fast Node Manager) for Node.js 20. pnpm as package manager. Next.js 16.1.3, React 19.2.3, Tailwind 4, TypeScript 5.9, ESLint 9. Turbopack enabled for dev. Created in temp dir then merged due to existing files.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-18T13:47:12.983854482-05:00","created_by":"wanerpena","updated_at":"2026-01-18T13:52:11.003142345-05:00","closed_at":"2026-01-18T13:47:21.859016169-05:00","close_reason":"Closed"}
{"id":"voiceprocessor-web-smy","title":"Add wavesurfer.js for audio visualization","description":"Install wavesurfer.js for waveform visualization in AudioPlayer component","notes":"Added wavesurfer.js ^7.8.0. Will be used by AudioPlayer component for waveform visualization.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-18T13:47:39.459440825-05:00","created_by":"wanerpena","updated_at":"2026-01-18T14:02:21.931764898-05:00","closed_at":"2026-01-18T14:02:21.931764898-05:00","close_reason":"Closed"}
{"id":"voiceprocessor-web-snu","title":"Implement payment success/cancel callback pages","description":"## Frontend: Payment Success/Cancel Callback Pages\n\nCreate pages to handle Stripe checkout callbacks after payment completes or is cancelled.\n\n### URLs to Implement\n- /payment/success - Shown after successful payment\n- /payment/cancel - Shown if user cancels checkout\n\n### Success Page Requirements\n1. Display Payment Successful confirmation\n2. Show purchased pack details (name, credits added)\n3. Refresh user credits from API\n4. Go to Dashboard button\n5. Optional: Confetti animation\n\n### Cancel Page Requirements\n1. Display Payment Cancelled message\n2. Try Again button - returns to billing\n3. Contact Support link\n\n### Technical Notes\n- Success URL receives session_id query param from Stripe\n- Can optionally verify session status via backend\n- Credits already added by webhook before redirect\n\n### Acceptance Criteria\n- [ ] /payment/success route created\n- [ ] /payment/cancel route created\n- [ ] Success page refreshes credits\n- [ ] Cancel page offers retry option\n- [ ] Both pages are responsive","status":"closed","priority":0,"issue_type":"feature","created_at":"2026-01-24T20:00:35.885422007-05:00","created_by":"wanerpena","updated_at":"2026-01-25T01:46:07.992269469-05:00","closed_at":"2026-01-25T01:46:07.992269469-05:00","close_reason":"Final verification and cleanup complete: all tests pass (14/14), build succeeds, both payment pages (success and cancel) verified in build output","dependencies":[{"issue_id":"voiceprocessor-web-snu","depends_on_id":"voiceprocessor-web-hbm","type":"blocks","created_at":"2026-01-24T20:01:01.498222201-05:00","created_by":"wanerpena"}]}
{"id":"voiceprocessor-web-tzy","title":"Add JWT token expiry validation","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-19T14:32:40.327870054-05:00","created_by":"wanerpena","updated_at":"2026-01-19T14:32:46.820808108-05:00","closed_at":"2026-01-19T14:32:46.820808108-05:00","close_reason":"Completed in session"}
{"id":"voiceprocessor-web-wa7","title":"Improve navigation smoothness","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-19T14:51:41.484787329-05:00","created_by":"wanerpena","updated_at":"2026-01-19T14:51:41.55660668-05:00","closed_at":"2026-01-19T14:51:41.55660668-05:00","close_reason":"Added progress bar, loading states, and CSS transitions"}
{"id":"voiceprocessor-web-xgz","title":"Connect frontend pages to backend API","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-19T14:32:32.709118119-05:00","created_by":"wanerpena","updated_at":"2026-01-19T14:32:46.778340582-05:00","closed_at":"2026-01-19T14:32:46.778340582-05:00","close_reason":"Completed in session"}
{"id":"voiceprocessor-web-ymc","title":"Profile settings - update user info","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-19T21:55:29.49421088-05:00","created_by":"wanerpena","updated_at":"2026-01-19T21:55:29.49421088-05:00"}
{"id":"voiceprocessor-web-ys6","title":"Set up Vitest for unit testing","description":"Install and configure Vitest with React Testing Library","notes":"Added vitest ^2.1.0, @vitejs/plugin-react ^4.3.0, @testing-library/react ^16.1.0, @testing-library/dom ^10.4.0, jsdom ^25.0.1. Created vitest.config.ts and tests/setup.ts. Tests in src/**/*.test.{ts,tsx} or tests/**/*.test.{ts,tsx}.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-18T13:47:52.1429702-05:00","created_by":"wanerpena","updated_at":"2026-01-18T14:03:28.124784224-05:00","closed_at":"2026-01-18T14:03:28.124784224-05:00","close_reason":"Closed"}
{"id":"voiceprocessor-web-zux","title":"Add shared layout with header/nav","description":"Header with logo, navigation, credits display. Consistent layout across all authenticated pages","notes":"Created Header (logo, nav, credits display, settings icon), MobileNav (bottom tab bar), AppLayout wrapper. Pages moved to (app) route group for shared layout. Desktop nav + mobile bottom nav.","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-18T14:34:52.0354039-05:00","created_by":"wanerpena","updated_at":"2026-01-18T14:36:45.314626667-05:00","closed_at":"2026-01-18T14:36:45.314626667-05:00","close_reason":"Closed"}
