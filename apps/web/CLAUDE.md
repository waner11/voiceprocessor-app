# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.


## Project Overview

VoiceProcessor Web is a Next.js 14+ frontend for a multi-provider Text-to-Speech platform. Users can convert long-form text to audiobooks using providers like ElevenLabs, OpenAI, Google, and Amazon Polly.

**Status:** Early-stage - documentation complete, implementation pending.

## Commands

```bash
pnpm install              # Install dependencies
pnpm dev                  # Start development server (http://localhost:3000)
pnpm build                # Build for production
pnpm lint                 # Run ESLint
pnpm test                 # Run Vitest unit tests
pnpm test:e2e             # Run Playwright E2E tests
pnpm generate:api         # Generate API client from backend OpenAPI spec
```

## Tech Stack

- **Framework:** Next.js 14+ (App Router)
- **Language:** TypeScript
- **Styling:** Tailwind CSS + shadcn/ui
- **Server State:** TanStack Query (React Query)
- **Client State:** Zustand
- **Forms:** React Hook Form + Zod
- **Real-time:** SignalR (@microsoft/signalr)
- **Audio:** wavesurfer.js
- **Testing:** Vitest (unit), Playwright (E2E)

## Architecture

### Directory Structure

```
src/
├── app/           # Next.js App Router pages
├── components/    # Reusable UI components
├── features/      # Feature-specific components and logic
├── hooks/         # Custom React hooks
├── lib/           # Utilities, API client, SignalR
├── stores/        # Zustand stores
└── types/         # TypeScript types
```

### State Management Pattern

- **Server state** (API data, generations, voices): TanStack Query with automatic refetching
- **Client state** (UI preferences, selected voice): Zustand stores

### API Integration

The API client is auto-generated from the backend's OpenAPI spec using `openapi-typescript` and `openapi-fetch`. Run `pnpm generate:api` to sync types with the backend.

### Real-time Updates

SignalR WebSocket connection provides live progress updates for audio generation jobs. Updates are integrated with React Query cache for seamless UI updates.

## Environment Variables

```bash
NEXT_PUBLIC_API_URL=http://localhost:5000    # Backend API URL
NEXT_PUBLIC_APP_ENV=development              # Environment type
```

## Commit Messages

Write commit messages like a human developer would. Keep them natural and concise.

**Rules:**
- Never add "Co-Authored-By", "Generated by", or any AI attribution
- No overly formal or verbose descriptions
- Use lowercase, imperative mood (e.g., "fix", "add", "update")
- One line is usually enough; add body only if truly needed

**Good examples:**
```
fix voice selector not updating on provider change
add cost estimate component
handle empty text input gracefully
update api client for new generation endpoint
```

**Avoid:**
```
Fix: Implemented robust error handling for the voice selector component
Added comprehensive cost estimation feature with full provider support
This commit addresses the issue where...
```

## Issue Tracking (bd/beads)

This project uses `bd` for issue tracking. Key commands:

```bash
bd ready              # Find available work
bd show <id>          # View issue details
bd update <id> --status in_progress
bd close <id>         # Complete work
bd sync --from-main   # Pull beads updates (for ephemeral branches)
```

## Related Repositories

- **Backend API:** `/home/wanerpena/Documents/Projects/voiceprocessor-api`
